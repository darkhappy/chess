@startuml Class
!theme vibrant

'https://plantuml.com/class-diagram
package Models {
    abstract class Piece {
        - _colour : Colour
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
        + CanCollide() : bool
    }
    
    abstract class StartingPiece extends Piece {
        - _hasMoved : bool
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }

    class Pawn extends StartingPiece {
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }

    class Rook extends StartingPiece {
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }

    class Knight extends Piece {
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }

    class Bishop extends Piece {
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }

    class Queen extends Piece {
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }

    class King extends StartingPiece {
        + ValidMove(int x1, int y1, int x2, int y2) : bool
        + ToString() : string
    }
    
    class Match {
        - _board : Board
        - _current : Colour
        - _history : string[]
        - _turnNumber : int
        + Export() : string
        + ValidTurn (int start, int target) : bool
        + MakeTurn (int start, int target) : void 
        + ValidSelection (int cell, bool firstClick) : bool
    }
    class Board {
        - _cells : Cell[]
        + ToString() : string
        + Collision(int start, int target) : bool
    }
    class Cell {
        - _item : Nullable<Piece>
        + IsEmpty() : bool
    }
    
    class Player {
        - _name : string
        - _points : int
    }
    enum Colour {
        Black
        White
    }

    Match "1" *--> "1" Board
    Board "1" *--> "64" Cell
    Cell "1" *--> "0..1" Piece
}

package Controllers {
    class Chess {
        - _listGames : List<GameController>
        + main() : void 
        + NewGame() : void
        + StartGame(Player[2] players) : void
        + ManagePlayers() : void
        + Exit() : void
    }

    class GameController  {
        - _main : Chess
        - _selected : int
        - _match : Match
        - _playerA : Player
        - _playerB : Player
        - _tieCounter : int
        - _view : FormMatch
        - Check() : bool
        - Checkmate() : bool
        - Castle() : bool
        - Promotion() : bool 
        - FiftyTurns() : bool
        - SameBoard() : bool
        + Turn (int start, int target) : void
        + Selection(int cell) : void
        + Resign() : void
    }

    class PlayerController {
        - _main : Chess
        + Add() : void
        + Remove() : void
    }

    Chess *--> GameController
    GameController o--> Chess
    PlayerController o-up-> Chess
}

package Views {
    class FormMenu {
        - _main : Chess
        + Start(object sender, System.EventArgs e) : void
        + Exit(object sender, System.EventArgs e) : void
        + ManagePlayers(object sender, System.EventArgs e) : void
    }
    class FormMatch {
        - _controller : GameController
        + GridClick(object sender, System.EventArgs e) : void
        + DrawBoard(string board) : void
        + DrawSelection(int cell) : void
        + ShowMessage(string message) : void
        + VictoryMessage() : void
    }
    
    class FormLeaderboard {
        - _controller : PlayerController
        + ShowList(List<Player>) : void
        + Add() : void
        + Remove() : void 
        + Back() : void
    }
    class FormPromotion {
        - _controller : GameController
        + Submit(object sender, System.EventArgs e) : void
    }
    class FormSelection {
        - _controller : main
        + OpenLeaderboard() : void
        + Start() : Player[2]
        + Cancel() : void
    }
    
}

GameController "1" *--> "1" Match
GameController "1" o--> "2" Player
PlayerController *-left-> Player
Chess *-down-> FormSelection
GameController *-down-> FormMatch
PlayerController *-down-> FormLeaderboard
GameController *-down-> FormPromotion
FormMatch o-up-> GameController
FormLeaderboard o-up-> PlayerController
FormPromotion o-up-> GameController
FormMenu o-up-> Chess
FormSelection o-up-> Chess

@enduml